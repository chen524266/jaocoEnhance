### Introduction

Developed based on the official Jacoco 0.8.7 branch, enhancing Jacoco functionality and supporting the following features:
1. Incremental code coverage
2. Merge the coverage of the same method with the same full class name but different classId, either to generate a report or to generate an exec file for further merging
3. Insert filtering code below the method call line of the reflection method to filter out the attribute $jacocoData generated by Jacoco instrumentation
4. Differential code line marking
5. Divide coverage based on request header or requester IP, not open source, requires paid support

Function Description: As shown in the figure below, except for dividing coverage according to IP or other rules, all other functions have been open sourced 

![image](https://github.com/user-attachments/assets/efaf3c5f-7196-493d-9f58-23222a4736e1)

Maven Compilation : Some unnecessary modules and plugins have been removed. Directly execute the mvn command: mvn clean install - Dmaven. test. skip=true - Dmaven. javadoc. skip=true

### new parameter explain:

--Diffcode or --diffCodeFiles is incremental statistics, without it, the entire quantity is counted. You can generate this data yourself, or use https://gitee.com/Dray/code-diff to Get diff 
- onlyMergeExec if true, do not generate a report, only merge probe data, generate merged exec file 
-- mergeExcelfilepath list of JaCoCo *.exec that need to merge files to read
-- mergeClassfilepath location of Java class files need to merge
-- mergeExec output file for the finished merge exec file
  
For test examples, please refer to the test class org.jacoco.cli-INternal.commands ReportTest.mytest4()

### Usage:

Example of merging probe data to generate exec. It is recommended to introduce the Jacoco cli package in the project and execute the command mode directly in the code:
File html=new File ("D: \ home"); 
new Main().execute("report", "D:\jacoco_merge_test.exec", "--classfiles","D:\gitworkplace\luckframeweb\coverage\trunk\616788\classfiles\bbzx\com", "--classfiles","D:\gitworkplace\luckframeweb\coverage\trunk\616788\classfiles\common\com", "--classfiles","D:\gitworkplace\luckframeweb\coverage\trunk\616788\classfiles\reportsupport\com", "--classfiles","D:\gitworkplace\luckframeweb\coverage\trunk\616788\classfiles\reportview\com", "--classfiles","D:\gitworkplace\luckframeweb\coverage\trunk\616788\classfiles\website\com", "--mergeExecfilepath","D:\gitworkplace\luckframeweb\coverage\trunk\616785_616788\execfiles\jacoco20240109165235.exec", "--mergeClassfilepath","D:\gitworkplace\luckframeweb\coverage\trunk\616788\classfiles\bbzx\com" , "--mergeClassfilepath","D:\gitworkplace\luckframeweb\coverage\trunk\616788\classfiles\reportview\com", "--mergeClassfilepath","D:\gitworkplace\luckframeweb\coverage\trunk\616788\classfiles\common\com", "--mergeClassfilepath","D:\gitworkplace\luckframeweb\coverage\trunk\616788\classfiles\reportsupport\com", "--mergeClassfilepath","D:\gitworkplace\luckframeweb\coverage\trunk\616788\classfiles\website\com", "--sourcefiles","D:\gitworkplace\luckframeweb\coverage\trunk\616788\sourcefiles", "--onlyMergeExec", "true", "--mergeExec", "D:\jacoco_merge_test.exec", "--html", html.getAbsolutePath());  Alternatively, it can be called through the Jacoco-cli.jar package, such as Java - jar Jacoco-cli.jar report -- diffCode diff -- classfiles classdir -- ARG value etc

The jar package method is executed as follows (jdk1.8):

The command to directly generate a report is java - jar org.Jacoco.cli-0.8.7-SNAPSHOT-nodeps.jar report F: \ webDemo \ exec \ 2.exec -- classfiles F: \ webDemo \ target \ classes \ -- merge Excel file path F: \ webDemo \ exec \ 1.exec -- merge Classfile path F: \ webDemo \ classes_1 \ -- diffCodeFiles F: \ home \ code-diff \ webDemo \ 1111 \ diffjson -- sourcefiles F: \ webDemo \ src \ main \ java -- html F: \ webDemo \ exec \ report-diff_2
Merge exec java - jar org.Jacoco.cli-0.8.7-SNAPSHOT-nodeps.jar report F: \ webDemo \ exec \ 2.exec -- classfiles F: \ webDemo \ target \ classes \ -- merge Excel file path F: \ webDemo \ exec \ 1.exec -- merge Excel file path F: \ webDemo \ classes_1 \ -- onlinMergeEXE true -- merge Excel F: \ webDemo \ exec \ merge. exec
The second merge, the previously merged exec file, with the merges Classfile path parameter set to the class path of the last merged version, for example
When merging exec, it is necessary to specify the merge Classfile path. Currently, A.exec and B.exec are merged into AB.exe. At this point, there is another C.exec. When merging AB.exe and C.exec, the merge Classfile path of AB.exe should be the class folder path of B
3. Generate incremental report for java - jar org.Jacoco.cli-0.8.7-SNAPSHOT-nodeps.jar report F: \ webDemo \ exec \ merge. exec -- classfiles F: \ webDemo \ target \ classes -- sourcefiles F: \ webDemo \ src \ main \ java -- html F: \ webDemo \ exec \ report-diff -- diffCodeFiles F: \ home \ code-diff \ webDemo \ 1111 \ diffjson -- encoding=utf8
4. Generate a full report for java - jar org.Jacoco.cli-0.8.7-SNAPSHOT-nodeps.jar report F: \ webDemo \ exec \ merge. exec -- classfiles F: \ webDemo \ target \ classes -- sourcefiles F: \ webDemo \ src \ main \ java -- html F: \ webDemo \ exec \ report_full

If you have any questions, you can join the author's WeChat group to communicate
![image](https://github.com/user-attachments/assets/a02c5b59-0999-45ef-b0b5-754dfabdb472)

